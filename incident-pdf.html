<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Denton Fire - My Incident Information (Printable)</title>
    
    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/png" href="https://files.constantcontact.com/3720c3fd901/10017eb4-f7d2-424d-92ed-c1b5424b9869.png">
    <link rel="apple-touch-icon" href="https://files.constantcontact.com/3720c3fd901/10017eb4-f7d2-424d-92ed-c1b5424b9869.png">
    <meta name="apple-mobile-web-app-title" content="My Fire Info">
    <meta name="application-name" content="My Fire Info">

    <!-- Social Sharing (Open Graph) -->
    <meta property="og:title" content="Denton Fire - Incident Information Record">
    <meta property="og:description" content="A tool for Denton residents to record fire incident details and generate a PDF for insurance and recovery.">
    <meta property="og:image" content="https://files.constantcontact.com/3720c3fd901/10017eb4-f7d2-424d-92ed-c1b5424b9869.png">
    <meta property="og:url" content="https://dentonfiredept.github.io/after-the-fire/incident-pdf.html">
    <meta property="og:type" content="website">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Denton Fire Incident Record">
    <meta name="twitter:description" content="Record your fire incident details securely and download a PDF for your records.">
    <meta name="twitter:image" content="https://files.constantcontact.com/3720c3fd901/10017eb4-f7d2-424d-92ed-c1b5424b9869.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        navy: '#152a40',
                        red: '#bf2726',
                        yellow: '#f9c031',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        /* Print-specific styles */
        @media print {
            body { background: white; }
            .no-print { display: none !important; }
            .shadow-xl { box-shadow: none !important; }
            .rounded-xl { border-radius: 0 !important; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- UPDATED: max-w-3xl changed to max-w-2xl (~700px) for narrower look -->
    <div class="max-w-2xl w-full bg-white shadow-xl rounded-xl overflow-hidden" id="incident-form-container">
        
        <!-- Header -->
        <div class="bg-navy p-6 text-center">
            <img src="https://files.constantcontact.com/3720c3fd901/10017eb4-f7d2-424d-92ed-c1b5424b9869.png" alt="Denton Fire Patch" class="h-24 mx-auto mb-4 drop-shadow-md">
            <h1 class="text-2xl font-bold text-white uppercase tracking-wide">Incident Information Record</h1>
            <p class="text-gray-300 text-sm mt-1">Denton Fire Department</p>
        </div>

        <!-- The Content Area -->
        <div id="pdf-content" class="p-8 space-y-6">
            <p class="text-sm text-gray-600 mb-6 italic border-l-4 border-red pl-4 py-2 bg-red-50 no-print">
                Type your details below. When finished, click the "Download PDF" button at the bottom. Your data is not stored online; it stays on your device.
            </p>

            <div class="space-y-6">
                <!-- Date -->
                <div>
                    <label class="block text-sm font-bold text-navy mb-1 uppercase tracking-wide">Date of Fire</label>
                    <input type="date" id="dateOfFire" class="w-full bg-gray-50 border-b-2 border-gray-300 focus:border-navy p-2 text-gray-800 text-lg font-medium outline-none transition placeholder-gray-400">
                </div>

                <!-- Incident Number -->
                <div>
                    <label class="block text-sm font-bold text-navy mb-1 uppercase tracking-wide">Incident Report Number</label>
                    <input type="text" id="incidentNumber" placeholder="e.g. 2025-001234" class="w-full bg-gray-50 border-b-2 border-gray-300 focus:border-navy p-2 text-gray-800 text-lg font-medium outline-none transition">
                </div>

                <!-- Investigator -->
                <div>
                    <label class="block text-sm font-bold text-navy mb-1 uppercase tracking-wide">Fire Investigator Name</label>
                    <input type="text" id="investigatorName" placeholder="Investigator Name" class="w-full bg-gray-50 border-b-2 border-gray-300 focus:border-navy p-2 text-gray-800 text-lg font-medium outline-none transition">
                </div>

                 <!-- Insurance Policy Number -->
                <div>
                    <label class="block text-sm font-bold text-navy mb-1 uppercase tracking-wide">Insurance Policy Number</label>
                    <input type="text" id="insurancePolicy" placeholder="Policy Number" class="w-full bg-gray-50 border-b-2 border-gray-300 focus:border-navy p-2 text-gray-800 text-lg font-medium outline-none transition">
                </div>
            </div>

            <!-- Disclaimer -->
            <div class="mt-8 pt-6 border-t border-gray-200 text-xs text-gray-400 text-center">
                <p>This document is for personal records only. Official reports must be requested from the Denton Fire Department.</p>
                <p class="mt-1">Denton Fire Department • 332 E. Hickory St, Denton, TX • (940) 349-8840 • www.dentonfire.com</p>
            </div>
        </div>

        <!-- Action Bar (Hidden in PDF) -->
        <div class="bg-gray-50 p-6 border-t border-gray-200 text-center no-print" data-html2canvas-ignore="true">
            <button onclick="generatePDF()" class="bg-navy hover:bg-gray-800 text-white font-bold py-3 px-8 rounded-lg shadow-lg transform transition hover:-translate-y-1 flex items-center justify-center mx-auto space-x-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                <span>Download PDF</span>
            </button>
            <button onclick="window.location.href='index.html'" class="mt-4 text-sm text-gray-500 hover:text-navy underline">Return to Guide</button>
        </div>

    </div>

    <script>
        // Auto-fill today's date
        document.addEventListener('DOMContentLoaded', () => {
            const dateInput = document.getElementById('dateOfFire');
            if (dateInput) {
                const today = new Date().toISOString().split('T')[0];
                dateInput.value = today;
            }
        });

        function generatePDF() {
            const element = document.getElementById('incident-form-container');
            
            // 1. Prepare Styles for PDF (Clean Look)
            const inputs = element.querySelectorAll('input');
            const originalStyles = [];

            // Temporarily remove margin from the main container to kill top whitespace
            const originalMargin = element.style.margin;
            element.style.margin = '0';
            element.style.borderRadius = '0'; // Remove rounded corners for print
            element.style.boxShadow = 'none'; // Remove shadow

            inputs.forEach((input, index) => {
                // Save original styles
                originalStyles[index] = {
                    border: input.style.border,
                    background: input.style.backgroundColor,
                    borderBottom: input.style.borderBottom
                };
                
                input.setAttribute('value', input.value); // Force value for capture
                
                // Style for PDF
                input.style.border = 'none'; 
                input.style.borderBottom = '1px solid #ccc'; 
                input.style.backgroundColor = 'transparent'; 
                input.style.paddingLeft = '0';
            });

            // 2. Configure PDF Options
            const opt = {
                margin:       [0.25, 0.25, 0.25, 0.25], // Reduced margin (was 0.5)
                filename:     'My_Fire_Incident_Info.pdf',
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { 
                    scale: 2, 
                    useCORS: true, 
                    letterRendering: true,
                    scrollY: 0 // Helps prevent top whitespace
                },
                jsPDF:        { unit: 'in', format: 'letter', orientation: 'portrait' }
            };

            // 3. Generate and Restore
            html2pdf().set(opt).from(element).save().then(() => {
                // Restore styles
                element.style.margin = originalMargin;
                element.style.borderRadius = '';
                element.style.boxShadow = '';

                inputs.forEach((input, index) => {
                    input.style.border = originalStyles[index].border;
                    input.style.backgroundColor = originalStyles[index].background;
                    input.style.borderBottom = originalStyles[index].borderBottom;
                    input.style.paddingLeft = '';
                });
            });
        }
    </script>
</body>
</html>
